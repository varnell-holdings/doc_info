<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor Preferences</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #333;
            margin-bottom: 30px;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        
        .selector-section {
            margin-bottom: 30px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
            font-size: 16px;
        }
        
        select {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 4px;
            background-color: white;
            cursor: pointer;
        }
        
        select:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .info-section {
            padding: 25px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border-left: 4px solid #4CAF50;
            min-height: 200px;
        }
        
        .info-section h1 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 28px;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }
        
        .info-section h2 {
            color: #34495e;
            font-size: 20px;
            margin-top: 25px;
            margin-bottom: 10px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }
        
        .info-section h3 {
            color: #555;
            font-size: 16px;
            margin-top: 15px;
            margin-bottom: 8px;
        }
        
        .info-section p {
            line-height: 1.6;
            color: #666;
            margin: 10px 0;
        }
        
        .info-section ul {
            line-height: 1.8;
            color: #666;
            margin: 10px 0;
            padding-left: 25px;
        }
        
        .info-section li {
            margin: 5px 0;
        }
        
        .info-section strong {
            color: #333;
        }
        
        .placeholder {
            color: #999;
            font-style: italic;
            text-align: center;
            padding: 60px 20px;
        }
        
        .error-message {
            color: #d32f2f;
            background-color: #ffebee;
            padding: 15px;
            border-radius: 4px;
            border-left: 4px solid #d32f2f;
        }
        
        .loading {
            text-align: center;
            color: #666;
            padding: 40px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Doctor Preferences Guide</h1>
        
        <div class="selector-section">
            <label for="doctorSelect">Select Doctor:</label>
            <select id="doctorSelect">
                <option value="">-- Choose a doctor --</option>
            </select>
        </div>
        
        <div class="info-section" id="doctorInfo">
            <p class="placeholder">Please select a doctor to view their preferences.</p>
        </div>
    </div>

    <!-- Load the list of doctors -->
    <script src="doctor_html/doctors_list.js"></script>
    
    <script>
        const selectElement = document.getElementById('doctorSelect');
        const infoSection = document.getElementById('doctorInfo');
        
        // Check if doctors list was loaded
        if (typeof doctorsList === 'undefined') {
            infoSection.innerHTML = `
                <div class="error-message">
                    <strong>Error:</strong> Could not load doctors list. 
                    Make sure the doctor_html/doctors_list.js file exists.
                    <br><br>
                    Run the Python script: <code>python convert_doctor_data.py</code>
                </div>
            `;
        } else {
            // Populate dropdown with doctors
            doctorsList.forEach(doctor => {
                const option = document.createElement('option');
                option.value = doctor.file;
                option.textContent = doctor.name;
                selectElement.appendChild(option);
            });
        }
        
        // Handle doctor selection
        selectElement.addEventListener('change', async function() {
            const selectedFile = this.value;
            
            if (selectedFile === "") {
                infoSection.innerHTML = '<p class="placeholder">Please select a doctor to view their preferences.</p>';
                return;
            }
            
            // Show loading message
            infoSection.innerHTML = '<p class="loading">Loading...</p>';
            
            try {
                // Fetch the HTML file
                const response = await fetch(`doctor_html/${selectedFile}`);
                
                if (!response.ok) {
                    throw new Error(`Could not load file: ${selectedFile}`);
                }
                
                const htmlContent = await response.text();
                infoSection.innerHTML = htmlContent;
                
            } catch (error) {
                infoSection.innerHTML = `
                    <div class="error-message">
                        <strong>Error loading doctor information:</strong><br>
                        ${error.message}
                        <br><br>
                        Make sure the HTML files exist in the doctor_html folder.
                    </div>
                `;
                console.error('Error:', error);
            }
        });
    </script>
</body>
</html>